<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible">
        <title>game 1</title>
        <style media="screen">
            canvas {
                border: 1px black solid;
            }

        </style>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- <link rel="stylesheet" type="text/css" media="screen" href="main.css" /> -->
        <script src="main.js"></script>
    </head>
    <body>
        <canvas id="id-canvas" width="400" height="300"></canvas>
        <script>
            var log = console.log.bind(console)

            var imageFromPath =function(path) {
                var img = new Image();
                img.src = path
                return img
            }

            var Paddle = function() {
                var image = imageFromPath('images/paddle.png')
                var o = {
                    image: image,
                    x: 100,
                    y: 200,
                    speed: 5,
                }
                return o
            }

            var __main = function() {
                var canvas = document.querySelector('#id-canvas')
                var context = canvas.getContext('2d')

                var paddle = Paddle()

                var leftDown = false
                var rightDown = false
                // events
                window.addEventListener('keydown',function(event){
                    var k = event.key
                    // log(event)
                    if(k == 'a'){
                        leftDown = true
                    }else if (k == 'd'){
                        rightDown = true
                    }
                })
                window.addEventListener('keyup',function(event){
                    var k = event.key
                    // log(event)
                    if(k == 'a'){
                        leftDown = false
                    }else if (k == 'd'){
                        rightDown = false
                    }
                })
                setInterval(function(){
                    // update x and y
// 看到37分钟
                    if(leftDown){
                        paddle.x -= paddle.speed
                    }else if(rightDown){
                        paddle.x += paddle.speed
                    }
                    // clamp x 

                    // draw
                    context.clearRect(0, 0, canvas.width, canvas.height);
                    context.drawImage(paddle.image,paddle.x,paddle.y);
                }, 1000/30)
            }


            __main()
        </script>
    </body>
</html>